<!DOCTYPE html>
<html>
  
      <title>W3.CSS</title>
      <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-teal.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
        <meta http-equiv="Pragma" content="no-cache" />
        <meta http-equiv="Expires" content="0" />
        
        
        <script src="/javascripts/mqttws31.js" type="text/javascript"></script>
        <!-- <script src="/js/angular.js" type="text/javascript"></script> -->
        <script type = "text/javascript"  src = "/javascripts/jquery.min.js"></script>
        <link rel="stylesheet" href="/stylesheets/bootstrap.min.css">
        <script type = "text/javascript" src="/javascripts/angular.min.js"></script>
        <script type = "text/javascript" src="/javascripts/JS.js"></script>
        <script type = "text/javascript" src="/javascripts/popper.min.js"></script>
        
        <script type = "text/javascript" src="/javascripts/bootstrap.min.js"></script>
        

      </head>

      
      <style>

body {font-family: "Roboto", sans-serif}
.w3-bar-block .w3-bar-item {
  padding: 16px;
  font-weight: bold;
}
a:active {
  color: yellow;
}
</style>
<script type="text/javascript">

  </script>
<body>
  <script type = "text/javascript" src="/javascripts/cal.js"></script>
<nav class="w3-sidebar w3-bar-block w3-collapse w3-animate-left w3-card" style="z-index:3;width:250px;" id="mySidebar">
  <a class="w3-bar-item w3-button w3-border-bottom w3-large" href="#"><img src="https://www.w3schools.com/images/w3schools.png" style="width:80%;"></a>
  <a class="w3-bar-item w3-button w3-hide-large w3-large" href="javascript:void(0)" onclick="w3_close()">Close <i class="fa fa-remove"></i></a>
  <h4 style = "text-align: center">TOPICS</h4>

  <a class="w3-bar-item w3-button" href="" onclick="return sub_topics('Physics A')">Physics A</a>
  <a class="w3-bar-item w3-button" href="" onclick="return sub_topics('Physics B')">Physics B</a>
  <a class="w3-bar-item w3-button" href="" onclick="return sub_topics('Seminar Room')" >Seminar Room</a>

 
  
</nav>

<div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer" id="myOverlay"></div>

<div class="w3-main" style="margin-left:250px;">

<div id="myTop" class="w3-container w3-top w3-theme w3-large">
  <p><i class="fa fa-bars w3-button w3-teal w3-hide-large w3-xlarge" onclick="w3_open()"></i>
  
  <nav class="navbar navbar-expand-sm  justify-content-center">
      <ul class="navbar-nav mc-auto ">
        <li class="nav-item">
            
            <form  action="/logout" method="dialog" style = "width: 380px">
            <button class="btn"  value="Connect" onclick="return MQTTconnect()" style = 'color: white;font-size: 16px;margin:5px; '><i class="material-icons">wifi</i>Connect</button>
            <button class="btn"  value="DisConnect" onclick="disconnect()"  style = 'color: white;font-size: 16px;margin:5px'><i class="material-icons">wifi_off</i>DisConnect</button>
                        
            
            
            <button class="btn"  type="submit" formmethod="POST" id = "logout-button" style = 'color: white;font-size: 16px;margin:5px'><i class="material-icons">power_settings_new</i>Logout</button>
        
            </form>
          
        </li>
        
      </ul>
    </nav>
    <br>
</div>

<header class="w3-container w3-theme" style="padding:64px 32px">
  
  <div id="status" > <h3> <small>Connection Status: Not Connected </small> </h3>  </div>


</header>

<div class="w3-container" style="padding:32px">

  <div class="container-fluid">
    <h2 class = 'display-4 ml-auto'>Current Readings</h2>
    <div class="row">
      <div class="col" style="background-color:lavender;"><i class="material-icons" style = 'font-size:48px;color:orange'>whatshot</i><h2 ><small>Temperature </small>  </h2> <h4> 36.78 </h4></div>
      <div class="col" style="background-color:orange;"><i class="material-icons" style = 'font-size:48px;color:lightblue'>opacity</i><h2 ><small>Humidity </small> </h2> <h4> 25 </h4></div>
      <div class="col" style="background-color:lavender;"><i class="material-icons" style = 'font-size:48px;color:red'>scatter_plot</i><h2 ><small>CO2 </small> </h2><h4>1000 </h4></div>
    </div>
  </div>




<hr>


<div class="container-fluid" style = 'height: 200px;overflow: scroll;overflow-x: hidden' > <p id="out_messages" aria-placeholder="History goes here"> </p> </div>


<hr>
<h2>Publish</h2>
<div class = "row w3-sand" >
<div class="w3-container  w3-leftbar"   >
    
    <div class="dropdown">
        <button type="button" class="btn btn-primary dropdown-toggle" data-toggle= "collapse" style = "margin: 20px 20px 20px 0px">
          Pub-Topics
        </button>
        <div class="dropdown-menu " >
          <select class="country"  multiple="multiple"  ng-app="myApp" ng-controller = 'dlinks'> 
              <option class="dropdown-item" ng-repeat="l in options.langs">{{ l.label }}</option>  
          </select>
            
            
          
          
        </div>
     
      </div>
    </div>

    
    <!-- <button type = "button" id = "button2" >ready</button> -->
    <input type="text" id = 'sendMssg' placeholder = 'Message' style = 'margin: 20px; height: 30px' onkeypress="">
    
    
        <i id = "send_button" onclick=" mssg() ;return send_message(topicc,mssgs);"  onmousedown="style = 'color: red;font-size: 48px;margin-top: 10px'" onmouseup="style = 'color: rgb(59, 25, 151);font-size: 48px;margin:10px;'" style = 'color: rgb(59, 25, 151);font-size: 48px;margin:10px;' class="material-icons">send</i>
    
    </div>
    
          
</div>          

<hr>

<div id="status_messages">
</div>
Received Messages:

<div id="out_messages">
</div>



</div>

<footer class="w3-container w3-theme" style="padding:32px">
  <p>Footer information goes here</p>
</footer>
     
</div>

<script>
  var topicc = "Roboto";
  $(document).ready(function() {
      topicc = "";
      $("#sendMssg").click(function(){
        var countries = [];
        $.each($(".country option:selected"), function(){            
            countries.push($(this).val());
        });
        console.log(countries);
        topicc = countries[0];
        console.log("topic inside "+topicc);
        // alert("You have selected the country - " + countries.join(", "));
   
      });
  });

  console.log("the new topic is "+ topicc);
    

var input = document.getElementById("sendMssg");
input.addEventListener("keyup", function(event) {
  if (event.keyCode === 13) {
   event.preventDefault();
   document.getElementById("send_button").click();
  }
});
    var mssgs = "";
    function tpc(word){
        topicc = word;
    }

    function mssg(){
     mssgs = document.getElementById("sendMssg").value;
    }

// Open and close the sidebar on medium and small screens
function w3_open() {
  document.getElementById("mySidebar").style.display = "block";
  document.getElementById("myOverlay").style.display = "block";
}

function w3_close() {
  document.getElementById("mySidebar").style.display = "none";
  document.getElementById("myOverlay").style.display = "none";
}

// Change style of top container on scroll
// window.onscroll = function() {myFunction()};
// function myFunction() {
//   if (document.body.scrollTop > 80 || document.documentElement.scrollTop > 80) {
//     document.getElementById("myTop").classList.add("w3-card-4", "w3-animate-opacity");
//     document.getElementById("myIntro").classList.add("w3-show-inline-block");
//   } else {
//     document.getElementById("myIntro").classList.remove("w3-show-inline-block");
//     document.getElementById("myTop").classList.remove("w3-card-4", "w3-animate-opacity");
//   }
// }

// Accordions
function myAccordion(id) {
  var x = document.getElementById(id);
  if (x.className.indexOf("w3-show") == -1) {
    x.className += " w3-show";
    x.previousElementSibling.className += " w3-theme";
  } else { 
    x.className = x.className.replace("w3-show", "");
    x.previousElementSibling.className = 
    x.previousElementSibling.className.replace(" w3-theme", "");
  }
}
</script>
     <script>
	
      MQTTconnect();
        
    //
      var connected_flag=0	
      var mqtt;
      
        var reconnectTimeout = 2000;
      var host= location.hostname;
      console.log('host is '+location.hostname);
      var port=9002;
      var row=0;
      var out_msg="";
      
      var mcount=0;
      </script>
</body>
</html> 
